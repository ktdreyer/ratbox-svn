leeh        2006/03/17 19:39:56 UTC	(20060317_0-22181)
  Log:
  - make banserv use LOWER() for queries on the mask, to avoid problems with
    having to use the exact case
  

  Modified:
	rserv/trunk/src/s_banserv.c (File Modified) 
	rserv/trunk/tools/dbupgrade.pl (File Modified) 


leeh        2006/03/16 22:16:27 UTC	(20060316_5-22179)
  Log:
  - add in documentation for the dbhook system
  

  Modified:
	rserv/trunk/doc/dbhook.txt (File Added) 


leeh        2006/03/16 21:28:36 UTC	(20060316_4-22177)
  Log:
  - add Id property 
  

  Modified:
	rserv/trunk/tools/dbupgrade.pl  (Property Modified)
	rserv/trunk/tools/definetolength.pl  (Property Modified)


leeh        2006/03/16 21:24:30 UTC	(20060316_3-22175)
  Log:
  - move the perl code for extracting values from defines into
    tools/definetolength.pl
  - make generate-schema.pl use definetolength.pl, and accept an 
    include path as the first argument
  - add dbupgrade.pl, which will output the list of db updates needed
    since a given release
  - update the schemas 
  

  Modified:
	rserv/trunk/doc/base/schema-mysql.txt (File Modified) 
	rserv/trunk/doc/base/schema-pgsql.txt (File Modified) 
	rserv/trunk/doc/generate-schema.pl (File Modified) 
	rserv/trunk/doc/schema-sqlite.txt (File Modified) 
	rserv/trunk/tools/dbupgrade.pl (File Added) 
	rserv/trunk/tools/definetolength.pl (File Added) 


leeh        2006/03/16 19:05:09 UTC	(20060316_2-22173)
  Log:
  - make %Q formatter handle a NULL parameter safely
  

  Modified:
	rserv/trunk/src/snprintf.c (File Modified) 


leeh        2006/03/16 19:03:05 UTC	(20060316_1-22171)
  Log:
  - add rsdb_hook_schedule(), so sql statements can be scheduled whilst a db
    hook is running
  

  Modified:
	rserv/trunk/include/dbhook.h (File Modified) 
	rserv/trunk/src/dbhook.c (File Modified) 
	rserv/trunk/src/s_userserv.c (File Modified) 


leeh        2006/03/16 18:48:10 UTC	(20060316_0-22169)
  Log:
  - add SETPASS hook to users_sync for setting passwords
  

  Modified:
	rserv/trunk/src/s_userserv.c (File Modified) 


leeh        2006/03/15 20:53:38 UTC	(20060315_4-22163)
  Log:
  - add help files for operserv::dbsync and operserv::rehash
  

  Modified:
	rserv/trunk/help/operserv/dbsync (File Added) 
	rserv/trunk/help/operserv/index-admin (File Modified) 
	rserv/trunk/help/operserv/rehash (File Added) 
	rserv/trunk/help/operserv/u-dbsync (File Added) 


leeh        2006/03/15 20:49:31 UTC	(20060315_3-22161)
  Log:
  - make .die call HOOK_DBSYNC
  

  Modified:
	rserv/trunk/src/ucommand.c (File Modified) 


leeh        2006/03/15 20:48:13 UTC	(20060315_2-22159)
  Log:
  - add operserv::rehash
  

  Modified:
	rserv/trunk/src/s_operserv.c (File Modified) 


leeh        2006/03/15 20:43:03 UTC	(20060315_1-22157)
  Log:
  - add HOOK_DBSYNC, which is called when anything needs a database sync with
    reality (primarily last time a username/channel was used)
  - add operserv::dbsync to force a database sync
  

  Modified:
	rserv/trunk/include/hook.h (File Modified) 
	rserv/trunk/src/s_chanserv.c (File Modified) 
	rserv/trunk/src/s_operserv.c (File Modified) 
	rserv/trunk/src/s_userserv.c (File Modified) 


leeh        2006/03/15 18:54:02 UTC	(20060315_0-22155)
  Log:
  - add a userserv dbhook for registering usernames
  

  Modified:
	rserv/trunk/src/s_userserv.c (File Modified) 


leeh        2006/03/14 22:26:27 UTC	(20060314_6-22153)
  Log:
  - add string_to_array_delim() which breaks a string into an array with a
    configurable delimeter, and maxpara
  

  Modified:
	rserv/trunk/include/tools.h (File Modified) 
	rserv/trunk/src/tools.c (File Modified) 


leeh        2006/03/14 21:39:57 UTC	(20060314_5-22151)
  Log:
  - make rsdb_hook_delete() take the callback function as its argument of what
    to delete..
  

  Modified:
	rserv/trunk/include/dbhook.h (File Modified) 
	rserv/trunk/src/dbhook.c (File Modified) 


leeh        2006/03/14 21:34:18 UTC	(20060314_4-22149)
  Log:
  - remove 'field', always select 'data' instead
  

  Modified:
	rserv/trunk/include/dbhook.h (File Modified) 
	rserv/trunk/src/dbhook.c (File Modified) 


leeh        2006/03/14 21:12:27 UTC	(20060314_3-22147)
  Log:
  - add in a dbhook api
  

  Modified:
	rserv/trunk/include/dbhook.h (File Added) 
	rserv/trunk/src/Makefile.in (File Modified) 
	rserv/trunk/src/dbhook.c (File Added) 


leeh        2006/03/14 19:35:18 UTC	(20060314_2-22145)
  Log:
  - note limits on id in global::addwelcome
  

  Modified:
	rserv/trunk/help/global/addwelcome (File Modified) 


leeh        2006/03/14 19:33:37 UTC	(20060314_1-22143)
  Log:
  - add in activate/resetpass help files
  

  Modified:
	rserv/trunk/help/userserv/activate (File Added) 
	rserv/trunk/help/userserv/general (File Modified) 
	rserv/trunk/help/userserv/index (File Modified) 
	rserv/trunk/help/userserv/register (File Modified) 
	rserv/trunk/help/userserv/resetpass (File Added) 


leeh        2006/03/14 19:19:41 UTC	(20060314_0-22141)
  Log:
  - add in anjutas get_temp_time(), which accepts modifiers like "1w" for one
    week
  

  Modified:
	rserv/trunk/help/banserv/general (File Modified) 
	rserv/trunk/help/banserv/index (File Modified) 
	rserv/trunk/src/s_banserv.c (File Modified) 


leeh        2006/03/13 22:12:03 UTC	(20060313_4-22139)
  Log:
  - dont use sqlite2 db backend unless its forced
  - build sqlite3 for the packaged sqlite backend
  

  Modified:
	rserv/trunk/autoconf/configure.in (File Modified) 
	rserv/trunk/configure (File Modified) 


leeh        2006/03/13 21:57:53 UTC	(20060313_3-22137)
  Log:
  - remove the sqlite2 source
  

  Modified:
	rserv/trunk/sqlite/ (File Deleted) 


leeh        2006/03/13 21:56:29 UTC	(20060313_2-22135)
  Log:
  - remove old .cvsignore files
  

  Modified:
	rserv/trunk/.cvsignore (File Deleted) 
	rserv/trunk/help/.cvsignore (File Deleted) 
	rserv/trunk/include/.cvsignore (File Deleted) 
	rserv/trunk/src/.cvsignore (File Deleted) 


leeh        2006/03/13 21:50:20 UTC	(20060313_1-22133)
  Log:
  - update some copyrights..
  

  Modified:
	rserv/trunk/LICENSE (File Modified) 
	rserv/trunk/src/c_error.c (File Modified) 
	rserv/trunk/src/c_message.c (File Modified) 
	rserv/trunk/src/c_mode.c (File Modified) 
	rserv/trunk/src/channel.c (File Modified) 
	rserv/trunk/src/client.c (File Modified) 
	rserv/trunk/src/conf.c (File Modified) 
	rserv/trunk/src/crypt.c (File Modified) 
	rserv/trunk/src/io.c (File Modified) 
	rserv/trunk/src/rserv.c (File Modified) 
	rserv/trunk/src/s_alis.c (File Modified) 
	rserv/trunk/src/s_banserv.c (File Modified) 
	rserv/trunk/src/s_chanserv.c (File Modified) 
	rserv/trunk/src/s_global.c (File Modified) 
	rserv/trunk/src/s_jupeserv.c (File Modified) 
	rserv/trunk/src/s_nickserv.c (File Modified) 
	rserv/trunk/src/s_operbot.c (File Modified) 
	rserv/trunk/src/s_operserv.c (File Modified) 
	rserv/trunk/src/s_userserv.c (File Modified) 
	rserv/trunk/src/scommand.c (File Modified) 
	rserv/trunk/src/service.c (File Modified) 
	rserv/trunk/src/tools.c (File Modified) 


leeh        2006/03/13 21:46:39 UTC	(20060313_0-22131)
  Log:
  - set Id keyword on these
  

  Modified:
	rserv/trunk/src/rsdb_mysql.c  (Property Modified)
	rserv/trunk/src/rsdb_sqlite.c  (Property Modified)
	rserv/trunk/src/rsdb_sqlite3.c  (Property Modified)


leeh        2006/03/12 20:06:45 UTC	(20060312_18-22121)
  Log:
  - remove these unused test sources
  

  Modified:
	rserv/trunk/sqlite3/src/test1.c (File Deleted) 
	rserv/trunk/sqlite3/src/test2.c (File Deleted) 
	rserv/trunk/sqlite3/src/test3.c (File Deleted) 
	rserv/trunk/sqlite3/src/test4.c (File Deleted) 
	rserv/trunk/sqlite3/src/test5.c (File Deleted) 
	rserv/trunk/sqlite3/src/test6.c (File Deleted) 
	rserv/trunk/sqlite3/src/test7.c (File Deleted) 
	rserv/trunk/sqlite3/src/test_async.c (File Deleted) 
	rserv/trunk/sqlite3/src/test_md5.c (File Deleted) 
	rserv/trunk/sqlite3/src/test_server.c (File Deleted) 


leeh        2006/03/12 20:05:20 UTC	(20060312_17-22119)
  Log:
  - remove support for the tests
  

  Modified:
	rserv/trunk/sqlite3/Makefile.in (File Modified) 
	rserv/trunk/sqlite3/main.mk (File Modified) 
	rserv/trunk/sqlite3/test/ (File Deleted) 


leeh        2006/03/12 20:00:42 UTC	(20060312_16-22117)
  Log:
  - notes is empty
  - doc might as well be empty
  

  Modified:
	rserv/trunk/sqlite3/doc/ (File Deleted) 
	rserv/trunk/sqlite3/notes/ (File Deleted) 


leeh        2006/03/12 19:58:16 UTC	(20060312_15-22115)
  Log:
  - remove documentation
  

  Modified:
	rserv/trunk/sqlite3/Makefile.in (File Modified) 
	rserv/trunk/sqlite3/main.mk (File Modified) 
	rserv/trunk/sqlite3/www/ (File Deleted) 


leeh        2006/03/12 19:55:36 UTC	(20060312_14-22113)
  Log:
  - remove references to art/
  

  Modified:
	rserv/trunk/sqlite3/Makefile.in (File Modified) 
	rserv/trunk/sqlite3/art/ (File Deleted) 
	rserv/trunk/sqlite3/main.mk (File Modified) 


leeh        2006/03/12 19:52:24 UTC	(20060312_13-22111)
  Log:
  - remove some unneeded stuff
  

  Modified:
	rserv/trunk/sqlite3/Makefile.linux-gcc (File Deleted) 
	rserv/trunk/sqlite3/mkdll.sh (File Deleted) 
	rserv/trunk/sqlite3/publish.sh (File Deleted) 


leeh        2006/03/12 19:48:07 UTC	(20060312_12-22107)
  Log:
  - fix banserv::findkline etc ignoring permanent bans
  

  Modified:
	rserv/trunk/src/s_banserv.c (File Modified) 


leeh        2006/03/12 19:39:07 UTC	(20060312_11-22105)
  Log:
  - add in the sqlite3 sources.. these need pruning
  

  Modified:
	rserv/trunk/sqlite3/ (File Added) 
	rserv/trunk/sqlite3/Makefile.in (File Added) 
	rserv/trunk/sqlite3/Makefile.linux-gcc (File Added) 
	rserv/trunk/sqlite3/README (File Added) 
	rserv/trunk/sqlite3/VERSION (File Added) 
	rserv/trunk/sqlite3/aclocal.m4 (File Added) 
	rserv/trunk/sqlite3/addopcodes.awk (File Added) 
	rserv/trunk/sqlite3/art/ (File Added) 
	rserv/trunk/sqlite3/art/2005osaward.gif (File Added) 
	rserv/trunk/sqlite3/art/SQLite.eps (File Added) 
	rserv/trunk/sqlite3/art/SQLite.gif (File Added) 
	rserv/trunk/sqlite3/art/SQLiteLogo3.tiff (File Added) 
	rserv/trunk/sqlite3/art/tmp/ (File Added) 
	rserv/trunk/sqlite3/config.guess (File Added) 
	rserv/trunk/sqlite3/config.sub (File Added) 
	rserv/trunk/sqlite3/configure (File Added) 
	rserv/trunk/sqlite3/configure.ac (File Added) 
	rserv/trunk/sqlite3/contrib/ (File Added) 
	rserv/trunk/sqlite3/contrib/sqlitecon.tcl (File Added) 
	rserv/trunk/sqlite3/doc/ (File Added) 
	rserv/trunk/sqlite3/doc/lemon.html (File Added) 
	rserv/trunk/sqlite3/doc/report1.txt (File Added) 
	rserv/trunk/sqlite3/install-sh (File Added) 
	rserv/trunk/sqlite3/ltmain.sh (File Added) 
	rserv/trunk/sqlite3/main.mk (File Added) 
	rserv/trunk/sqlite3/mkdll.sh (File Added) 
	rserv/trunk/sqlite3/mkopcodec.awk (File Added) 
	rserv/trunk/sqlite3/mkopcodeh.awk (File Added) 
	rserv/trunk/sqlite3/mkso.sh (File Added) 
	rserv/trunk/sqlite3/notes/ (File Added) 
	rserv/trunk/sqlite3/publish.sh (File Added) 
	rserv/trunk/sqlite3/spec.template (File Added) 
	rserv/trunk/sqlite3/sqlite.pc.in (File Added) 
	rserv/trunk/sqlite3/sqlite3.1 (File Added) 
	rserv/trunk/sqlite3/sqlite3.def (File Added) 
	rserv/trunk/sqlite3/sqlite3.pc.in (File Added) 
	rserv/trunk/sqlite3/src/ (File Added) 
	rserv/trunk/sqlite3/src/alter.c (File Added) 
	rserv/trunk/sqlite3/src/analyze.c (File Added) 
	rserv/trunk/sqlite3/src/attach.c (File Added) 
	rserv/trunk/sqlite3/src/auth.c (File Added) 
	rserv/trunk/sqlite3/src/btree.c (File Added) 
	rserv/trunk/sqlite3/src/btree.h (File Added) 
	rserv/trunk/sqlite3/src/build.c (File Added) 
	rserv/trunk/sqlite3/src/callback.c (File Added) 
	rserv/trunk/sqlite3/src/complete.c (File Added) 
	rserv/trunk/sqlite3/src/date.c (File Added) 
	rserv/trunk/sqlite3/src/delete.c (File Added) 
	rserv/trunk/sqlite3/src/ex/ (File Added) 
	rserv/trunk/sqlite3/src/experimental.c (File Added) 
	rserv/trunk/sqlite3/src/expr.c (File Added) 
	rserv/trunk/sqlite3/src/func.c (File Added) 
	rserv/trunk/sqlite3/src/hash.c (File Added) 
	rserv/trunk/sqlite3/src/hash.h (File Added) 
	rserv/trunk/sqlite3/src/insert.c (File Added) 
	rserv/trunk/sqlite3/src/legacy.c (File Added) 
	rserv/trunk/sqlite3/src/main.c (File Added) 
	rserv/trunk/sqlite3/src/os.c (File Added) 
	rserv/trunk/sqlite3/src/os.h (File Added) 
	rserv/trunk/sqlite3/src/os_common.h (File Added) 
	rserv/trunk/sqlite3/src/os_unix.c (File Added) 
	rserv/trunk/sqlite3/src/os_win.c (File Added) 
	rserv/trunk/sqlite3/src/pager.c (File Added) 
	rserv/trunk/sqlite3/src/pager.h (File Added) 
	rserv/trunk/sqlite3/src/parse.y (File Added) 
	rserv/trunk/sqlite3/src/pragma.c (File Added) 
	rserv/trunk/sqlite3/src/prepare.c (File Added) 
	rserv/trunk/sqlite3/src/printf.c (File Added) 
	rserv/trunk/sqlite3/src/random.c (File Added) 
	rserv/trunk/sqlite3/src/select.c (File Added) 
	rserv/trunk/sqlite3/src/shell.c (File Added) 
	rserv/trunk/sqlite3/src/sqlite.h.in (File Added) 
	rserv/trunk/sqlite3/src/sqliteInt.h (File Added) 
	rserv/trunk/sqlite3/src/table.c (File Added) 
	rserv/trunk/sqlite3/src/tclsqlite.c (File Added) 
	rserv/trunk/sqlite3/src/test1.c (File Added) 
	rserv/trunk/sqlite3/src/test2.c (File Added) 
	rserv/trunk/sqlite3/src/test3.c (File Added) 
	rserv/trunk/sqlite3/src/test4.c (File Added) 
	rserv/trunk/sqlite3/src/test5.c (File Added) 
	rserv/trunk/sqlite3/src/test6.c (File Added) 
	rserv/trunk/sqlite3/src/test7.c (File Added) 
	rserv/trunk/sqlite3/src/test_async.c (File Added) 
	rserv/trunk/sqlite3/src/test_md5.c (File Added) 
	rserv/trunk/sqlite3/src/test_server.c (File Added) 
	rserv/trunk/sqlite3/src/tokenize.c (File Added) 
	rserv/trunk/sqlite3/src/trigger.c (File Added) 
	rserv/trunk/sqlite3/src/update.c (File Added) 
	rserv/trunk/sqlite3/src/utf.c (File Added) 
	rserv/trunk/sqlite3/src/util.c (File Added) 
	rserv/trunk/sqlite3/src/vacuum.c (File Added) 
	rserv/trunk/sqlite3/src/vdbe.c (File Added) 
	rserv/trunk/sqlite3/src/vdbe.h (File Added) 
	rserv/trunk/sqlite3/src/vdbeInt.h (File Added) 
	rserv/trunk/sqlite3/src/vdbeapi.c (File Added) 
	rserv/trunk/sqlite3/src/vdbeaux.c (File Added) 
	rserv/trunk/sqlite3/src/vdbefifo.c (File Added) 
	rserv/trunk/sqlite3/src/vdbemem.c (File Added) 
	rserv/trunk/sqlite3/src/where.c (File Added) 
	rserv/trunk/sqlite3/tclinstaller.tcl (File Added) 
	rserv/trunk/sqlite3/test/ (File Added) 
	rserv/trunk/sqlite3/test/aggerror.test (File Added) 
	rserv/trunk/sqlite3/test/all.test (File Added) 
	rserv/trunk/sqlite3/test/alter.test (File Added) 
	rserv/trunk/sqlite3/test/alter2.test (File Added) 
	rserv/trunk/sqlite3/test/alter3.test (File Added) 
	rserv/trunk/sqlite3/test/altermalloc.test (File Added) 
	rserv/trunk/sqlite3/test/analyze.test (File Added) 
	rserv/trunk/sqlite3/test/async.test (File Added) 
	rserv/trunk/sqlite3/test/attach.test (File Added) 
	rserv/trunk/sqlite3/test/attach2.test (File Added) 
	rserv/trunk/sqlite3/test/attach3.test (File Added) 
	rserv/trunk/sqlite3/test/attachmalloc.test (File Added) 
	rserv/trunk/sqlite3/test/auth.test (File Added) 
	rserv/trunk/sqlite3/test/autoinc.test (File Added) 
	rserv/trunk/sqlite3/test/autovacuum.test (File Added) 
	rserv/trunk/sqlite3/test/autovacuum_crash.test (File Added) 
	rserv/trunk/sqlite3/test/autovacuum_ioerr.test (File Added) 
	rserv/trunk/sqlite3/test/autovacuum_ioerr2.test (File Added) 
	rserv/trunk/sqlite3/test/avtrans.test (File Added) 
	rserv/trunk/sqlite3/test/between.test (File Added) 
	rserv/trunk/sqlite3/test/bigfile.test (File Added) 
	rserv/trunk/sqlite3/test/bigrow.test (File Added) 
	rserv/trunk/sqlite3/test/bind.test (File Added) 
	rserv/trunk/sqlite3/test/bindxfer.test (File Added) 
	rserv/trunk/sqlite3/test/blob.test (File Added) 
	rserv/trunk/sqlite3/test/btree.test (File Added) 
	rserv/trunk/sqlite3/test/btree2.test (File Added) 
	rserv/trunk/sqlite3/test/btree4.test (File Added) 
	rserv/trunk/sqlite3/test/btree5.test (File Added) 
	rserv/trunk/sqlite3/test/btree6.test (File Added) 
	rserv/trunk/sqlite3/test/btree7.test (File Added) 
	rserv/trunk/sqlite3/test/btree8.test (File Added) 
	rserv/trunk/sqlite3/test/busy.test (File Added) 
	rserv/trunk/sqlite3/test/capi2.test (File Added) 
	rserv/trunk/sqlite3/test/capi3.test (File Added) 
	rserv/trunk/sqlite3/test/capi3b.test (File Added) 
	rserv/trunk/sqlite3/test/cast.test (File Added) 
	rserv/trunk/sqlite3/test/check.test (File Added) 
	rserv/trunk/sqlite3/test/collate1.test (File Added) 
	rserv/trunk/sqlite3/test/collate2.test (File Added) 
	rserv/trunk/sqlite3/test/collate3.test (File Added) 
	rserv/trunk/sqlite3/test/collate4.test (File Added) 
	rserv/trunk/sqlite3/test/collate5.test (File Added) 
	rserv/trunk/sqlite3/test/collate6.test (File Added) 
	rserv/trunk/sqlite3/test/colmeta.test (File Added) 
	rserv/trunk/sqlite3/test/conflict.test (File Added) 
	rserv/trunk/sqlite3/test/corrupt.test (File Added) 
	rserv/trunk/sqlite3/test/corrupt2.test (File Added) 
	rserv/trunk/sqlite3/test/crash.test (File Added) 
	rserv/trunk/sqlite3/test/date.test (File Added) 
	rserv/trunk/sqlite3/test/default.test (File Added) 
	rserv/trunk/sqlite3/test/delete.test (File Added) 
	rserv/trunk/sqlite3/test/delete2.test (File Added) 
	rserv/trunk/sqlite3/test/delete3.test (File Added) 
	rserv/trunk/sqlite3/test/descidx1.test (File Added) 
	rserv/trunk/sqlite3/test/descidx2.test (File Added) 
	rserv/trunk/sqlite3/test/descidx3.test (File Added) 
	rserv/trunk/sqlite3/test/diskfull.test (File Added) 
	rserv/trunk/sqlite3/test/distinctagg.test (File Added) 
	rserv/trunk/sqlite3/test/enc.test (File Added) 
	rserv/trunk/sqlite3/test/enc2.test (File Added) 
	rserv/trunk/sqlite3/test/enc3.test (File Added) 
	rserv/trunk/sqlite3/test/expr.test (File Added) 
	rserv/trunk/sqlite3/test/fkey1.test (File Added) 
	rserv/trunk/sqlite3/test/format4.test (File Added) 
	rserv/trunk/sqlite3/test/func.test (File Added) 
	rserv/trunk/sqlite3/test/hook.test (File Added) 
	rserv/trunk/sqlite3/test/in.test (File Added) 
	rserv/trunk/sqlite3/test/index.test (File Added) 
	rserv/trunk/sqlite3/test/index2.test (File Added) 
	rserv/trunk/sqlite3/test/index3.test (File Added) 
	rserv/trunk/sqlite3/test/insert.test (File Added) 
	rserv/trunk/sqlite3/test/insert2.test (File Added) 
	rserv/trunk/sqlite3/test/insert3.test (File Added) 
	rserv/trunk/sqlite3/test/interrupt.test (File Added) 
	rserv/trunk/sqlite3/test/intpkey.test (File Added) 
	rserv/trunk/sqlite3/test/ioerr.test (File Added) 
	rserv/trunk/sqlite3/test/join.test (File Added) 
	rserv/trunk/sqlite3/test/join2.test (File Added) 
	rserv/trunk/sqlite3/test/join3.test (File Added) 
	rserv/trunk/sqlite3/test/join4.test (File Added) 
	rserv/trunk/sqlite3/test/join5.test (File Added) 
	rserv/trunk/sqlite3/test/journal1.test (File Added) 
	rserv/trunk/sqlite3/test/lastinsert.test (File Added) 
	rserv/trunk/sqlite3/test/laststmtchanges.test (File Added) 
	rserv/trunk/sqlite3/test/like.test (File Added) 
	rserv/trunk/sqlite3/test/limit.test (File Added) 
	rserv/trunk/sqlite3/test/lock.test (File Added) 
	rserv/trunk/sqlite3/test/lock2.test (File Added) 
	rserv/trunk/sqlite3/test/lock3.test (File Added) 
	rserv/trunk/sqlite3/test/main.test (File Added) 
	rserv/trunk/sqlite3/test/malloc.test (File Added) 
	rserv/trunk/sqlite3/test/malloc2.test (File Added) 
	rserv/trunk/sqlite3/test/malloc3.test (File Added) 
	rserv/trunk/sqlite3/test/malloc4.test (File Added) 
	rserv/trunk/sqlite3/test/malloc5.test (File Added) 
	rserv/trunk/sqlite3/test/manydb.test (File Added) 
	rserv/trunk/sqlite3/test/memdb.test (File Added) 
	rserv/trunk/sqlite3/test/memleak.test (File Added) 
	rserv/trunk/sqlite3/test/minmax.test (File Added) 
	rserv/trunk/sqlite3/test/misc1.test (File Added) 
	rserv/trunk/sqlite3/test/misc2.test (File Added) 
	rserv/trunk/sqlite3/test/misc3.test (File Added) 
	rserv/trunk/sqlite3/test/misc4.test (File Added) 
	rserv/trunk/sqlite3/test/misc5.test (File Added) 
	rserv/trunk/sqlite3/test/misuse.test (File Added) 
	rserv/trunk/sqlite3/test/notnull.test (File Added) 
	rserv/trunk/sqlite3/test/null.test (File Added) 
	rserv/trunk/sqlite3/test/pager.test (File Added) 
	rserv/trunk/sqlite3/test/pager2.test (File Added) 
	rserv/trunk/sqlite3/test/pager3.test (File Added) 
	rserv/trunk/sqlite3/test/pagesize.test (File Added) 
	rserv/trunk/sqlite3/test/pragma.test (File Added) 
	rserv/trunk/sqlite3/test/printf.test (File Added) 
	rserv/trunk/sqlite3/test/progress.test (File Added) 
	rserv/trunk/sqlite3/test/quick.test (File Added) 
	rserv/trunk/sqlite3/test/quote.test (File Added) 
	rserv/trunk/sqlite3/test/reindex.test (File Added) 
	rserv/trunk/sqlite3/test/rollback.test (File Added) 
	rserv/trunk/sqlite3/test/rowid.test (File Added) 
	rserv/trunk/sqlite3/test/safety.test (File Added) 
	rserv/trunk/sqlite3/test/schema.test (File Added) 
	rserv/trunk/sqlite3/test/select1.test (File Added) 
	rserv/trunk/sqlite3/test/select2.test (File Added) 
	rserv/trunk/sqlite3/test/select3.test (File Added) 
	rserv/trunk/sqlite3/test/select4.test (File Added) 
	rserv/trunk/sqlite3/test/select5.test (File Added) 
	rserv/trunk/sqlite3/test/select6.test (File Added) 
	rserv/trunk/sqlite3/test/select7.test (File Added) 
	rserv/trunk/sqlite3/test/server1.test (File Added) 
	rserv/trunk/sqlite3/test/shared.test (File Added) 
	rserv/trunk/sqlite3/test/shared2.test (File Added) 
	rserv/trunk/sqlite3/test/shared_err.test (File Added) 
	rserv/trunk/sqlite3/test/sort.test (File Added) 
	rserv/trunk/sqlite3/test/subquery.test (File Added) 
	rserv/trunk/sqlite3/test/subselect.test (File Added) 
	rserv/trunk/sqlite3/test/sync.test (File Added) 
	rserv/trunk/sqlite3/test/table.test (File Added) 
	rserv/trunk/sqlite3/test/tableapi.test (File Added) 
	rserv/trunk/sqlite3/test/tclsqlite.test (File Added) 
	rserv/trunk/sqlite3/test/temptable.test (File Added) 
	rserv/trunk/sqlite3/test/tester.tcl (File Added) 
	rserv/trunk/sqlite3/test/thread1.test (File Added) 
	rserv/trunk/sqlite3/test/thread2.test (File Added) 
	rserv/trunk/sqlite3/test/threadtest1.c (File Added) 
	rserv/trunk/sqlite3/test/threadtest2.c (File Added) 
	rserv/trunk/sqlite3/test/tkt1435.test (File Added) 
	rserv/trunk/sqlite3/test/tkt1443.test (File Added) 
	rserv/trunk/sqlite3/test/tkt1444.test (File Added) 
	rserv/trunk/sqlite3/test/tkt1449.test (File Added) 
	rserv/trunk/sqlite3/test/tkt1473.test (File Added) 
	rserv/trunk/sqlite3/test/tkt1501.test (File Added) 
	rserv/trunk/sqlite3/test/tkt1512.test (File Added) 
	rserv/trunk/sqlite3/test/tkt1514.test (File Added) 
	rserv/trunk/sqlite3/test/tkt1536.test (File Added) 
	rserv/trunk/sqlite3/test/tkt1537.test (File Added) 
	rserv/trunk/sqlite3/test/tkt1567.test (File Added) 
	rserv/trunk/sqlite3/test/tkt1644.test (File Added) 
	rserv/trunk/sqlite3/test/tkt1667.test (File Added) 
	rserv/trunk/sqlite3/test/trace.test (File Added) 
	rserv/trunk/sqlite3/test/trans.test (File Added) 
	rserv/trunk/sqlite3/test/trigger1.test (File Added) 
	rserv/trunk/sqlite3/test/trigger2.test (File Added) 
	rserv/trunk/sqlite3/test/trigger3.test (File Added) 
	rserv/trunk/sqlite3/test/trigger4.test (File Added) 
	rserv/trunk/sqlite3/test/trigger5.test (File Added) 
	rserv/trunk/sqlite3/test/trigger6.test (File Added) 
	rserv/trunk/sqlite3/test/trigger7.test (File Added) 
	rserv/trunk/sqlite3/test/types.test (File Added) 
	rserv/trunk/sqlite3/test/types2.test (File Added) 
	rserv/trunk/sqlite3/test/types3.test (File Added) 
	rserv/trunk/sqlite3/test/unique.test (File Added) 
	rserv/trunk/sqlite3/test/update.test (File Added) 
	rserv/trunk/sqlite3/test/utf16.test (File Added) 
	rserv/trunk/sqlite3/test/vacuum.test (File Added) 
	rserv/trunk/sqlite3/test/vacuum2.test (File Added) 
	rserv/trunk/sqlite3/test/varint.test (File Added) 
	rserv/trunk/sqlite3/test/view.test (File Added) 
	rserv/trunk/sqlite3/test/where.test (File Added) 
	rserv/trunk/sqlite3/test/where2.test (File Added) 
	rserv/trunk/sqlite3/test/where3.test (File Added) 
	rserv/trunk/sqlite3/tool/ (File Added) 
	rserv/trunk/sqlite3/tool/diffdb.c (File Added) 
	rserv/trunk/sqlite3/tool/lemon.c (File Added) 
	rserv/trunk/sqlite3/tool/lempar.c (File Added) 
	rserv/trunk/sqlite3/tool/memleak.awk (File Added) 
	rserv/trunk/sqlite3/tool/memleak2.awk (File Added) 
	rserv/trunk/sqlite3/tool/memleak3.tcl (File Added) 
	rserv/trunk/sqlite3/tool/mkkeywordhash.c (File Added) 
	rserv/trunk/sqlite3/tool/mkopts.tcl (File Added) 
	rserv/trunk/sqlite3/tool/omittest.tcl (File Added) 
	rserv/trunk/sqlite3/tool/opcodeDoc.awk (File Added) 
	rserv/trunk/sqlite3/tool/report1.txt (File Added) 
	rserv/trunk/sqlite3/tool/showdb.c (File Added) 
	rserv/trunk/sqlite3/tool/showjournal.c (File Added) 
	rserv/trunk/sqlite3/tool/space_used.tcl (File Added) 
	rserv/trunk/sqlite3/tool/spaceanal.tcl (File Added) 
	rserv/trunk/sqlite3/tool/speedtest.tcl (File Added) 
	rserv/trunk/sqlite3/tool/speedtest2.tcl (File Added) 
	rserv/trunk/sqlite3/www/ (File Added) 
	rserv/trunk/sqlite3/www/arch.fig (File Added) 
	rserv/trunk/sqlite3/www/arch.gif (File Added) 
	rserv/trunk/sqlite3/www/arch.png (File Added) 
	rserv/trunk/sqlite3/www/arch.tcl (File Added) 
	rserv/trunk/sqlite3/www/arch2.fig (File Added) 
	rserv/trunk/sqlite3/www/arch2.gif (File Added) 
	rserv/trunk/sqlite3/www/arch2b.fig (File Added) 
	rserv/trunk/sqlite3/www/audit.tcl (File Added) 
	rserv/trunk/sqlite3/www/autoinc.tcl (File Added) 
	rserv/trunk/sqlite3/www/c_interface.tcl (File Added) 
	rserv/trunk/sqlite3/www/capi3.tcl (File Added) 
	rserv/trunk/sqlite3/www/capi3ref.tcl (File Added) 
	rserv/trunk/sqlite3/www/changes.tcl (File Added) 
	rserv/trunk/sqlite3/www/common.tcl (File Added) 
	rserv/trunk/sqlite3/www/compile.tcl (File Added) 
	rserv/trunk/sqlite3/www/conflict.tcl (File Added) 
	rserv/trunk/sqlite3/www/copyright-release.html (File Added) 
	rserv/trunk/sqlite3/www/copyright-release.pdf (File Added) 
	rserv/trunk/sqlite3/www/copyright.tcl (File Added) 
	rserv/trunk/sqlite3/www/datatype3.tcl (File Added) 
	rserv/trunk/sqlite3/www/datatypes.tcl (File Added) 
	rserv/trunk/sqlite3/www/different.tcl (File Added) 
	rserv/trunk/sqlite3/www/direct1b.gif (File Added) 
	rserv/trunk/sqlite3/www/docs.tcl (File Added) 
	rserv/trunk/sqlite3/www/download.tcl (File Added) 
	rserv/trunk/sqlite3/www/dynload.tcl (File Added) 
	rserv/trunk/sqlite3/www/faq.tcl (File Added) 
	rserv/trunk/sqlite3/www/fileformat.tcl (File Added) 
	rserv/trunk/sqlite3/www/formatchng.tcl (File Added) 
	rserv/trunk/sqlite3/www/fullscanb.gif (File Added) 
	rserv/trunk/sqlite3/www/index-ex1-x-b.gif (File Added) 
	rserv/trunk/sqlite3/www/index.tcl (File Added) 
	rserv/trunk/sqlite3/www/indirect1b1.gif (File Added) 
	rserv/trunk/sqlite3/www/lang.tcl (File Added) 
	rserv/trunk/sqlite3/www/lockingv3.tcl (File Added) 
	rserv/trunk/sqlite3/www/mingw.tcl (File Added) 
	rserv/trunk/sqlite3/www/nulls.tcl (File Added) 
	rserv/trunk/sqlite3/www/oldnews.tcl (File Added) 
	rserv/trunk/sqlite3/www/omitted.tcl (File Added) 
	rserv/trunk/sqlite3/www/opcode.tcl (File Added) 
	rserv/trunk/sqlite3/www/optimizer.tcl (File Added) 
	rserv/trunk/sqlite3/www/optimizing.tcl (File Added) 
	rserv/trunk/sqlite3/www/optoverview.tcl (File Added) 
	rserv/trunk/sqlite3/www/pragma.tcl (File Added) 
	rserv/trunk/sqlite3/www/quickstart.tcl (File Added) 
	rserv/trunk/sqlite3/www/shared.gif (File Added) 
	rserv/trunk/sqlite3/www/sharedcache.tcl (File Added) 
	rserv/trunk/sqlite3/www/speed.tcl (File Added) 
	rserv/trunk/sqlite3/www/sqlite.tcl (File Added) 
	rserv/trunk/sqlite3/www/support.tcl (File Added) 
	rserv/trunk/sqlite3/www/table-ex1b2.gif (File Added) 
	rserv/trunk/sqlite3/www/tclsqlite.tcl (File Added) 
	rserv/trunk/sqlite3/www/vdbe.tcl (File Added) 
	rserv/trunk/sqlite3/www/version3.tcl (File Added) 
	rserv/trunk/sqlite3/www/whentouse.tcl (File Added) 


leeh        2006/03/12 19:36:09 UTC	(20060312_10-22103)
  Log:
  - add support for sqlite3 db backend
  

  Modified:
	rserv/trunk/autoconf/configure.in (File Modified) 
	rserv/trunk/configure (File Modified) 
	rserv/trunk/src/rsdb_sqlite3.c (File Added) 


leeh        2006/03/12 19:35:30 UTC	(20060312_9-22101)
  Log:
  - raise PASSWDLEN so it accomodates md5 hashes
  

  Modified:
	rserv/trunk/include/rserv.h (File Modified) 


leeh        2006/03/12 17:42:25 UTC	(20060312_8-22099)
  Log:
  - update rsdb.txt with the db changes
  

  Modified:
	rserv/trunk/doc/rsdb.txt (File Modified) 


leeh        2006/03/12 17:33:51 UTC	(20060312_7-22097)
  Log:
  - add verify_token to users table
  - alter the way registration verification works, let them specify their own
    password, and just email them a token they need to use with
    USERSERV::ACTIVATE
  

  Modified:
	rserv/trunk/doc/base/schema-mysql.txt (File Modified) 
	rserv/trunk/doc/base/schema-pgsql.txt (File Modified) 
	rserv/trunk/doc/schema-sqlite.txt (File Modified) 
	rserv/trunk/src/s_userserv.c (File Modified) 


leeh        2006/03/12 16:10:42 UTC	(20060312_6-22091)
  Log:
  - clear any pending resetpass stuff from the db when we drop users
  - send email to parv[2] rather than reg_p->email, which doesnt exist yet
  - dont log users in when verification is needed to register
  - we should be storing crypted versions of the passwords when resetting
    passwords, not plaintext
  

  Modified:
	rserv/trunk/src/s_userserv.c (File Modified) 


leeh        2006/03/12 16:08:23 UTC	(20060312_5-22089)
  Log:
  - port 22087
    - fix broken seeding of the PRNG
  

  Modified:
	rserv/trunk/src/crypt.c (File Modified) 


leeh        2006/03/12 15:22:09 UTC	(20060312_4-22085)
  Log:
  - make USERSERV::RESETPASS take a new password as the third argument,
    instead of using the one that was emailed to them.
  - in USERSERV::RESETPASS, only check can_send_email() when we actually
    need to send an email
  

  Modified:
	rserv/trunk/src/s_userserv.c (File Modified) 


leeh        2006/03/12 13:51:36 UTC	(20060312_3-22083)
  Log:
  - add optional email verification for USERSERV::REGISTER, this will email
    users a password instead that they need to login with
  

  Modified:
	rserv/trunk/doc/example.conf (File Modified) 
	rserv/trunk/include/conf.h (File Modified) 
	rserv/trunk/include/s_userserv.h (File Modified) 
	rserv/trunk/src/conf.c (File Modified) 
	rserv/trunk/src/newconf.c (File Modified) 
	rserv/trunk/src/s_userserv.c (File Modified) 


leeh        2006/03/12 12:44:48 UTC	(20060312_2-22081)
  Log:
  - prune changelog to purely 1.1
  

  Modified:
	rserv/trunk/ChangeLog (File Modified) 


leeh        2006/03/12 12:11:07 UTC	(20060312_1-22079)
  Log:
  - add email_number and email_duration to email {};, giving an upper limit on
    how many emails we will send in a given duration
  

  Modified:
	rserv/trunk/doc/example.conf (File Modified) 
	rserv/trunk/include/conf.h (File Modified) 
	rserv/trunk/include/email.h (File Modified) 
	rserv/trunk/src/conf.c (File Modified) 
	rserv/trunk/src/email.c (File Modified) 
	rserv/trunk/src/newconf.c (File Modified) 
	rserv/trunk/src/s_userserv.c (File Modified) 


leeh        2006/03/12 11:38:00 UTC	(20060312_0-22077)
  Log:
  - fix include ordering so these two compile
  

  Modified:
	rserv/trunk/src/s_banserv.c (File Modified) 
	rserv/trunk/src/s_nickserv.c (File Modified) 


leeh        2006/03/11 23:25:53 UTC	(20060311_7-22073)
  Log:
  - handle short reads properly, we were treating a recv() of part of a line
    as an entire line, then ignoring the remainder the next time we pulled a
    line.
  
    We now store buffers for each connection and keep appending to this buffer
    until either we get a full line, or we've read BUFSIZE without a \n, at
    which point we parse.
  

  Modified:
	rserv/trunk/include/io.h (File Modified) 
	rserv/trunk/src/c_error.c (File Modified) 
	rserv/trunk/src/c_message.c (File Modified) 
	rserv/trunk/src/io.c (File Modified) 
	rserv/trunk/src/s_alis.c (File Modified) 
	rserv/trunk/src/s_global.c (File Modified) 
	rserv/trunk/src/s_operbot.c (File Modified) 
	rserv/trunk/src/s_operserv.c (File Modified) 


leeh        2006/03/11 21:32:51 UTC	(20060311_6-22071)
  Log:
  - port 22069
    - give a warning when a users introduced on a non-existant server, rather
      than coring
  

  Modified:
	rserv/trunk/src/client.c (File Modified) 


leeh        2006/03/11 19:52:09 UTC	(20060311_5-22067)
  Log:
  - move email configuration into its own email {}; block
  - add in disable_email = yes|no; to email {};, which will stop us ever
    sending emails.
  

  Modified:
	rserv/trunk/doc/example.conf (File Modified) 
	rserv/trunk/include/conf.h (File Modified) 
	rserv/trunk/src/conf.c (File Modified) 
	rserv/trunk/src/email.c (File Modified) 
	rserv/trunk/src/newconf.c (File Modified) 
	rserv/trunk/src/s_userserv.c (File Modified) 


leeh        2006/03/11 19:35:46 UTC	(20060311_4-22065)
  Log:
  - add an event in to expire things from users_resetpass
  

  Modified:
	rserv/trunk/src/s_userserv.c (File Modified) 


leeh        2006/03/11 19:30:22 UTC	(20060311_3-22063)
  Log:
  - add resetpass_duration = <time>; to userserv {};, controls how long
    resetpass requests are kept around waiting for confirmation
  

  Modified:
	rserv/trunk/doc/example.conf (File Modified) 
	rserv/trunk/include/conf.h (File Modified) 
	rserv/trunk/src/conf.c (File Modified) 
	rserv/trunk/src/newconf.c (File Modified) 
	rserv/trunk/src/s_userserv.c (File Modified) 


leeh        2006/03/11 19:17:25 UTC	(20060311_2-22061)
  Log:
  - fix operator::user in conf parser to deal with the fact lists are now
    ordered correctly
  

  Modified:
	rserv/trunk/src/newconf.c (File Modified) 


leeh        2006/03/11 18:48:10 UTC	(20060311_1-22055)
  Log:
  - the omode priv listed here is actually osmode
  

  Modified:
	rserv/trunk/doc/example.conf (File Modified) 


leeh        2006/03/11 18:35:13 UTC	(20060311_0-22053)
  Log:
  - port r22051
    - fix banserv losing permanent bans
  

  Modified:
	rserv/trunk/src/s_banserv.c (File Modified) 


leeh        2006/03/09 19:36:19 UTC	(20060309_5-22049)
  Log:
  - rework the email conf options so they take a list of quoted strings
    containing the email prog and its arguments
  - make send_email() go back to using the conf email program
  

  Modified:
	rserv/trunk/doc/example.conf (File Modified) 
	rserv/trunk/include/conf.h (File Modified) 
	rserv/trunk/src/conf.c (File Modified) 
	rserv/trunk/src/email.c (File Modified) 
	rserv/trunk/src/newconf.c (File Modified) 
	rserv/trunk/src/parser.y (File Modified) 


leeh        2006/03/09 19:12:38 UTC	(20060309_4-22047)
  Log:
  - sqlite expects these to be signed..
  

  Modified:
	rserv/trunk/include/rsdb.h (File Modified) 


leeh        2006/03/09 18:42:54 UTC	(20060309_3-22045)
  Log:
  - add NULL terminator to the sendmail args
  

  Modified:
	rserv/trunk/src/email.c (File Modified) 


leeh        2006/03/09 18:26:33 UTC	(20060309_2-22043)
  Log:
  - update schemas with users_resetpass
  

  Modified:
	rserv/trunk/doc/base/schema-mysql.txt (File Modified) 
	rserv/trunk/doc/base/schema-pgsql.txt (File Modified) 
	rserv/trunk/doc/schema-sqlite.txt (File Modified) 


jilles      2006/03/09 09:34:05 UTC	(20060309_1-22037)
  Log:
  Be a little more friendly to users who try to register
  a nick without a registered username.
  

  Modified:
	rserv/trunk/src/s_nickserv.c (File Modified) 


jilles      2006/03/09 09:24:21 UTC	(20060309_0-22035)
  Log:
  Bring email sending code closer to working.
  Needed to add <sys/wait.h> to stdinc.h.
  

  Modified:
	rserv/trunk/include/stdinc.h (File Modified) 
	rserv/trunk/src/email.c (File Modified) 


leeh        2006/03/08 22:27:54 UTC	(20060308_5-22033)
  Log:
  - dont use popen() when sending emails, but do the sockets ourselves
    - This code is broken, needs fixing.
  

  Modified:
	rserv/trunk/src/email.c (File Modified) 


leeh        2006/03/08 21:52:59 UTC	(20060308_4-22031)
  Log:
  - add in the mysql implementation of mysql_exec_fetch()
  - make col_count and row_count in struct rsdb_table unsigned
  

  Modified:
	rserv/trunk/include/rsdb.h (File Modified) 
	rserv/trunk/src/rsdb_mysql.c (File Modified) 


leeh        2006/03/08 21:20:39 UTC	(20060308_3-22029)
  Log:
  - remove rsdb_step() and friends
  

  Modified:
	rserv/trunk/include/rsdb.h (File Modified) 
	rserv/trunk/src/rsdb_mysql.c (File Modified) 
	rserv/trunk/src/rsdb_sqlite.c (File Modified) 


leeh        2006/03/08 21:19:16 UTC	(20060308_2-22027)
  Log:
  - remove usage of rsdb_step(), opting instead for rsdb_exec_fetch()
  

  Modified:
	rserv/trunk/src/s_banserv.c (File Modified) 
	rserv/trunk/src/s_userserv.c (File Modified) 


leeh        2006/03/08 20:50:54 UTC	(20060308_1-22025)
  Log:
  - make rsdb_exec_fetch() handle no rows being returned properly
  

  Modified:
	rserv/trunk/src/rsdb_sqlite.c (File Modified) 


leeh        2006/03/08 20:28:26 UTC	(20060308_0-22023)
  Log:
  - add in rsdb_exec_fetch(), which allocates an entire result set into memory
  - make the global code use rsdb_exec_fetch()
  

  Modified:
	rserv/trunk/include/rsdb.h (File Modified) 
	rserv/trunk/src/rsdb_sqlite.c (File Modified) 
	rserv/trunk/src/s_global.c (File Modified) 


leeh        2006/03/06 21:53:02 UTC	(20060306_4-22019)
  Log:
  - remove colnames from the db interface.. we dont use it and it will make
    pgsql easier
  

  Modified:
	rserv/trunk/include/rsdb.h (File Modified) 
	rserv/trunk/src/rsdb_mysql.c (File Modified) 
	rserv/trunk/src/rsdb_sqlite.c (File Modified) 
	rserv/trunk/src/s_banserv.c (File Modified) 
	rserv/trunk/src/s_chanserv.c (File Modified) 
	rserv/trunk/src/s_global.c (File Modified) 
	rserv/trunk/src/s_jupeserv.c (File Modified) 
	rserv/trunk/src/s_nickserv.c (File Modified) 
	rserv/trunk/src/s_operbot.c (File Modified) 
	rserv/trunk/src/s_operserv.c (File Modified) 
	rserv/trunk/src/s_userserv.c (File Modified) 


leeh        2006/03/06 21:25:32 UTC	(20060306_3-22017)
  Log:
  - actually call init_crypt_seed()
  - make USERSERV::REGISTER use crypt.c stuff to generate random passwords
  

  Modified:
	rserv/trunk/include/rserv.h (File Modified) 
	rserv/trunk/src/crypt.c (File Modified) 
	rserv/trunk/src/rserv.c (File Modified) 
	rserv/trunk/src/s_userserv.c (File Modified) 


leeh        2006/03/06 21:16:39 UTC	(20060306_2-22015)
  Log:
  - add the beginnings of USERSERV::RESETPASS, to email users a password reset
  

  Modified:
	rserv/trunk/doc/example.conf (File Modified) 
	rserv/trunk/include/conf.h (File Modified) 
	rserv/trunk/src/conf.c (File Modified) 
	rserv/trunk/src/newconf.c (File Modified) 
	rserv/trunk/src/s_userserv.c (File Modified) 


leeh        2006/03/06 21:16:09 UTC	(20060306_1-22013)
  Log:
  - port those crypt.c fixes over here
  

  Modified:
	rserv/trunk/src/crypt.c (File Modified) 


androsyn    2006/03/06 20:33:37 UTC	(20060306_0-22011)
  Log:
  - add postgresql schema
  - set Id tag property on schema-mysql.txt 
  
  

  Modified:
	rserv/trunk/doc/base/schema-mysql.txt  (Property Modified)
	rserv/trunk/doc/base/schema-pgsql.txt (File Added) 
	rserv/trunk/doc/generate-schema.pl (File Modified) 


leeh        2006/03/05 20:22:13 UTC	(20060305_3-22001)
  Log:
  - better make this 1.1.0beta
  

  Modified:
	rserv/trunk/include/config.h (File Modified) 


leeh        2006/03/05 19:48:08 UTC	(20060305_2-21997)
  Log:
  - do welcome messages a bit differently, just have 0-5 places to store them
    and use an array
  - add GLOBAL::LISTWELCOME
  

  Modified:
	rserv/trunk/doc/base/schema-mysql.txt (File Modified) 
	rserv/trunk/doc/schema-sqlite.txt (File Modified) 
	rserv/trunk/help/global/addwelcome (File Modified) 
	rserv/trunk/help/global/index-admin (File Modified) 
	rserv/trunk/help/global/listwelcome (File Added) 
	rserv/trunk/help/global/u-addwelcome (File Modified) 
	rserv/trunk/help/global/u-listwelcome (File Added) 
	rserv/trunk/src/s_global.c (File Modified) 


leeh        2006/03/05 14:12:20 UTC	(20060305_1-21995)
  Log:
  - add global welcome priv to example.conf
  - update schema with global_welcome table
  

  Modified:
	rserv/trunk/doc/base/schema-mysql.txt (File Modified) 
	rserv/trunk/doc/example.conf (File Modified) 
	rserv/trunk/doc/schema-sqlite.txt (File Modified) 


leeh        2006/03/05 14:10:06 UTC	(20060305_0-21993)
  Log:
  - add dlink_add_before(), to add a node before another one in a given list
  - add welcome messages to the global service, messages sent whenever a user
    connects to the network.
  

  Modified:
	rserv/trunk/help/global/addwelcome (File Added) 
	rserv/trunk/help/global/delwelcome (File Added) 
	rserv/trunk/help/global/general (File Modified) 
	rserv/trunk/help/global/index (File Modified) 
	rserv/trunk/help/global/index-admin (File Modified) 
	rserv/trunk/help/global/u-addwelcome (File Added) 
	rserv/trunk/help/global/u-delwelcome (File Added) 
	rserv/trunk/include/conf.h (File Modified) 
	rserv/trunk/include/tools.h (File Modified) 
	rserv/trunk/src/newconf.c (File Modified) 
	rserv/trunk/src/s_global.c (File Modified) 
	rserv/trunk/src/tools.c (File Modified) 


leeh        2006/03/04 23:48:02 UTC	(20060304_5-21991)
  Log:
  - add code for sending emails
  

  Modified:
	rserv/trunk/doc/example.conf (File Modified) 
	rserv/trunk/include/conf.h (File Modified) 
	rserv/trunk/include/email.h (File Added) 
	rserv/trunk/src/Makefile.in (File Modified) 
	rserv/trunk/src/email.c (File Added) 
	rserv/trunk/src/newconf.c (File Modified) 


leeh        2006/03/04 22:10:30 UTC	(20060304_4-21989)
  Log:
  - rsdb_step() shouldnt be using a while() loop, and def shouldnt be
    returning 1 when there isnt a row left..
  

  Modified:
	rserv/trunk/src/rsdb_mysql.c (File Modified) 


leeh        2006/03/04 22:02:54 UTC	(20060304_3-21987)
  Log:
  - fix rsdb_step() so it actually works on real memory
  

  Modified:
	rserv/trunk/src/rsdb_mysql.c (File Modified) 


leeh        2006/03/04 21:53:09 UTC	(20060304_2-21985)
  Log:
  - conf parser depends on having services client pointers, so load these
    before we parse the conf.  database depends on conf, so do that after and
    then call a post init function in services.
  

  Modified:
	rserv/trunk/include/c_init.h (File Modified) 
	rserv/trunk/include/client.h (File Modified) 
	rserv/trunk/include/service.h (File Modified) 
	rserv/trunk/src/rsdb_mysql.c (File Modified) 
	rserv/trunk/src/rserv.c (File Modified) 
	rserv/trunk/src/s_alis.c (File Modified) 
	rserv/trunk/src/s_banserv.c (File Modified) 
	rserv/trunk/src/s_chanserv.c (File Modified) 
	rserv/trunk/src/s_global.c (File Modified) 
	rserv/trunk/src/s_jupeserv.c (File Modified) 
	rserv/trunk/src/s_nickserv.c (File Modified) 
	rserv/trunk/src/s_operbot.c (File Modified) 
	rserv/trunk/src/s_operserv.c (File Modified) 
	rserv/trunk/src/s_userserv.c (File Modified) 
	rserv/trunk/src/service.c (File Modified) 


leeh        2006/03/04 21:49:34 UTC	(20060304_1-21983)
  Log:
  - dont attempt to do anything to a channels modestrings if they dont
    actually exist
  

  Modified:
	rserv/trunk/src/s_chanserv.c (File Modified) 


leeh        2006/03/04 21:40:44 UTC	(20060304_0-21981)
  Log:
  - make configure properly follow --with-sqlitebuild
  

  Modified:
	rserv/trunk/autoconf/configure.in (File Modified) 
	rserv/trunk/configure (File Modified) 


leeh        2006/03/03 21:17:10 UTC	(20060303_0-21979)
  Log:
  - add in some error checking and tidy up the code a bit
  

  Modified:
	rserv/trunk/src/rsdb_mysql.c (File Modified) 


leeh        2006/03/02 21:58:56 UTC	(20060302_5-21977)
  Log:
  - port over the full vsnprintf() from ircd-ratbox, and make this die() if it
    gets a format string it cant handle
  

  Modified:
	rserv/trunk/include/rserv.h (File Modified) 
	rserv/trunk/include/tools.h (File Modified) 
	rserv/trunk/src/Makefile.in (File Modified) 
	rserv/trunk/src/snprintf.c (File Added) 
	rserv/trunk/src/tools.c (File Modified) 


leeh        2006/03/02 21:15:34 UTC	(20060302_4-21975)
  Log:
  - remove doc/schema.txt from this Makefile.in
  

  Modified:
	rserv/trunk/Makefile.in (File Modified) 


leeh        2006/03/02 20:03:44 UTC	(20060302_3-21973)
  Log:
  - add a variety of warnings that the db tables shouldnt be modified
  

  Modified:
	rserv/trunk/INSTALL (File Modified) 
	rserv/trunk/INSTALL.mysql (File Modified) 
	rserv/trunk/README (File Modified) 


leeh        2006/03/02 19:58:31 UTC	(20060302_2-21971)
  Log:
  - add another XXX in rsdb_mysql.c where I need to fix something
  - add in specific install files for the database backends
  

  Modified:
	rserv/trunk/INSTALL (File Modified) 
	rserv/trunk/INSTALL.mysql (File Added) 
	rserv/trunk/INSTALL.sqlite (File Added) 
	rserv/trunk/src/rsdb_mysql.c (File Modified) 


leeh        2006/03/02 19:31:01 UTC	(20060302_1-21969)
  Log:
  - add in the mysql database backend
  - update configure so it takes --enable-mysql and --enable-sqlite to choose
    the database backend
  

  Modified:
	rserv/trunk/autoconf/configure.in (File Modified) 
	rserv/trunk/configure (File Modified) 
	rserv/trunk/src/Makefile.in (File Modified) 
	rserv/trunk/src/rsdb_mysql.c (File Added) 


leeh        2006/03/02 16:01:34 UTC	(20060302_0-21967)
  Log:
  - make the database callbacks use (const char **)
  

  Modified:
	rserv/trunk/include/rsdb.h (File Modified) 
	rserv/trunk/src/rsdb_sqlite.c (File Modified) 
	rserv/trunk/src/s_chanserv.c (File Modified) 
	rserv/trunk/src/s_jupeserv.c (File Modified) 
	rserv/trunk/src/s_nickserv.c (File Modified) 
	rserv/trunk/src/s_operbot.c (File Modified) 
	rserv/trunk/src/s_operserv.c (File Modified) 
	rserv/trunk/src/s_userserv.c (File Modified) 


leeh        2006/03/01 22:22:47 UTC	(20060301_1-21965)
  Log:
  - add db_host too, to specify hostname to connect to
  

  Modified:
	rserv/trunk/doc/example.conf (File Modified) 
	rserv/trunk/include/conf.h (File Modified) 
	rserv/trunk/src/newconf.c (File Modified) 


leeh        2006/03/01 18:21:04 UTC	(20060301_0-21955)
  Log:
  - add in new database {}; section, to control how we connect to the backened
    database server
  

  Modified:
	rserv/trunk/doc/example.conf (File Modified) 
	rserv/trunk/include/conf.h (File Modified) 
	rserv/trunk/src/newconf.c (File Modified) 


leeh        2006/02/28 21:59:05 UTC	(20060228_8-21949)
  Log:
  - make generate-schema.pl executable (I hope..)
  

  Modified:
	rserv/trunk/doc/generate-schema.pl  (Property Modified)


leeh        2006/02/28 21:55:10 UTC	(20060228_7-21947)
  Log:
  - add require_shortcut flag to service {};, which requires the commands come
    in over ENCAP (ie command shortcuts) rather than msg
  

  Modified:
	rserv/trunk/doc/example.conf (File Modified) 
	rserv/trunk/include/client.h (File Modified) 
	rserv/trunk/include/service.h (File Modified) 
	rserv/trunk/src/newconf.c (File Modified) 
	rserv/trunk/src/scommand.c (File Modified) 
	rserv/trunk/src/service.c (File Modified) 


leeh        2006/02/28 21:30:41 UTC	(20060228_6-21945)
  Log:
  - add a base mysql schema
  - add a perl script to generate the mysql schema, converting string lengths
    into actual values from macros in headers
  

  Modified:
	rserv/trunk/doc/base/schema-mysql.txt (File Added) 
	rserv/trunk/doc/generate-schema.pl (File Added) 


leeh        2006/02/28 19:42:50 UTC	(20060228_5-21943)
  Log:
  - add OPERNAMELEN, default 30, restricts how long an opers name in the
    config can be
  

  Modified:
	rserv/trunk/doc/base/ (File Added) 
	rserv/trunk/include/rserv.h (File Modified) 
	rserv/trunk/src/newconf.c (File Modified) 
	rserv/trunk/src/s_chanserv.c (File Modified) 


leeh        2006/02/28 18:26:37 UTC	(20060228_4-21933)
  Log:
  - add --with-userreglen=LENGTH to configure, to alter the maximum length of
    a registered nickname
  - prototype rsdb_init() and rsdb_shutdown() to (void)
  - fix const issue in c_mode.c
  

  Modified:
	rserv/trunk/autoconf/configure.in (File Modified) 
	rserv/trunk/configure (File Modified) 
	rserv/trunk/include/rsdb.h (File Modified) 
	rserv/trunk/include/s_userserv.h (File Modified) 
	rserv/trunk/include/setup.h.in (File Modified) 
	rserv/trunk/src/c_mode.c (File Modified) 


leeh        2006/02/28 18:15:44 UTC	(20060228_3-21931)
  Log:
  - rename schema.txt to schema-sqlite.txt
  

  Modified:
	rserv/trunk/doc/schema-sqlite.txt (File Added) 
	rserv/trunk/doc/schema.txt (File Deleted) 


leeh        2006/02/28 18:15:03 UTC	(20060228_2-21929)
  Log:
  - add documentation on the db abstraction layer
  

  Modified:
	rserv/trunk/doc/rsdb.txt (File Added) 


leeh        2006/02/28 09:15:17 UTC	(20060228_1-21927)
  Log:
  - add a more robust function for checking bans are valid
  

  Modified:
	rserv/trunk/include/channel.h (File Modified) 
	rserv/trunk/src/c_mode.c (File Modified) 
	rserv/trunk/src/s_chanserv.c (File Modified) 


leeh        2006/02/28 08:44:59 UTC	(20060228_0-21925)
  Log:
  - add valid_chname(), ensures length <= CHANNELLEN and the channel begins
    with '#'
  - disallow osjoin/objoin to invalid channels
  - ignore sjoins for invalid channels
  

  Modified:
	rserv/trunk/include/channel.h (File Modified) 
	rserv/trunk/src/channel.c (File Modified) 
	rserv/trunk/src/s_operbot.c (File Modified) 
	rserv/trunk/src/s_operserv.c (File Modified) 


leeh        2006/02/27 20:43:26 UTC	(20060227_3-21923)
  Log:
  - restrict passwords/email addys in userserv to 30/100 chars respectively
  - fix some compile errors in banserv
  

  Modified:
	rserv/trunk/include/rserv.h (File Modified) 
	rserv/trunk/src/s_banserv.c (File Modified) 
	rserv/trunk/src/s_userserv.c (File Modified) 


leeh        2006/02/27 19:50:40 UTC	(20060227_2-21921)
  Log:
  - be more anal about what our uplink sends us for nicks/servernames, and
    enforce theyre below NICKLEN/HOSTLEN
  

  Modified:
	rserv/trunk/src/client.c (File Modified) 
	rserv/trunk/src/newconf.c (File Modified) 


leeh        2006/02/27 19:05:22 UTC	(20060227_1-21919)
  Log:
  - add length checking of channels to operbot/operserv
  

  Modified:
	rserv/trunk/src/s_operbot.c (File Modified) 
	rserv/trunk/src/s_operserv.c (File Modified) 


leeh        2006/02/27 19:00:40 UTC	(20060227_0-21917)
  Log:
  - add length checking of fields to jupeserv and banserv
  

  Modified:
	rserv/trunk/src/s_banserv.c (File Modified) 
	rserv/trunk/src/s_jupeserv.c (File Modified) 


leeh        2006/02/26 21:19:59 UTC	(20060226_4-21915)
  Log:
  - unify the things that need to be escaped in sql to '%Q'
  

  Modified:
	rserv/trunk/src/s_banserv.c (File Modified) 
	rserv/trunk/src/s_chanserv.c (File Modified) 
	rserv/trunk/src/s_jupeserv.c (File Modified) 
	rserv/trunk/src/s_nickserv.c (File Modified) 
	rserv/trunk/src/s_operbot.c (File Modified) 
	rserv/trunk/src/s_operserv.c (File Modified) 
	rserv/trunk/src/s_userserv.c (File Modified) 


leeh        2006/02/26 21:16:46 UTC	(20060226_3-21913)
  Log:
  - add missing #include "rsdb.h" to tools.c
  - make sqlite wrapper use rs_vsnprintf()
  

  Modified:
	rserv/trunk/src/rsdb_sqlite.c (File Modified) 
	rserv/trunk/src/tools.c (File Modified) 


leeh        2006/02/26 21:13:24 UTC	(20060226_2-21911)
  Log:
  - add in rs_snprintf() and rs_vsnprintf(), custom snprintfs that handle %Q
    as a modifier, to sql escape whats contained within it
  - add rsdb_quote() sqlite implementation, to quote strings
  

  Modified:
	rserv/trunk/include/rsdb.h (File Modified) 
	rserv/trunk/include/tools.h (File Modified) 
	rserv/trunk/src/rsdb_sqlite.c (File Modified) 
	rserv/trunk/src/tools.c (File Modified) 


leeh        2006/02/26 18:31:34 UTC	(20060226_1-21909)
  Log:
  - move the single stepping select stuff over to rsdb_step*
  - remove the remaining loc_sqlite* step functions
  

  Modified:
	rserv/trunk/include/rsdb.h (File Modified) 
	rserv/trunk/src/rsdb_sqlite.c (File Modified) 
	rserv/trunk/src/s_banserv.c (File Modified) 


leeh        2006/02/26 18:13:22 UTC	(20060226_0-21907)
  Log:
  - add in missing rsdb files
  

  Modified:
	rserv/trunk/include/rsdb.h (File Added) 
	rserv/trunk/src/rsdb_sqlite.c (File Added) 


leeh        2006/02/24 11:37:42 UTC	(20060224_0-21903)
  Log:
  - add rsdb_transaction(), to deal with transactions
  - move remaining loc_sqlite_exec() over to rsdb_exec()
  - remove loc_sqlite_exec()
  

  Modified:
	rserv/trunk/src/s_chanserv.c (File Modified) 
	rserv/trunk/src/s_userserv.c (File Modified) 


leeh        2006/02/23 22:55:38 UTC	(20060223_2-21901)
  Log:
  - move the callback functions over to rsdb_exec()
  

  Modified:
	rserv/trunk/src/s_chanserv.c (File Modified) 
	rserv/trunk/src/s_jupeserv.c (File Modified) 
	rserv/trunk/src/s_nickserv.c (File Modified) 
	rserv/trunk/src/s_operbot.c (File Modified) 
	rserv/trunk/src/s_operserv.c (File Modified) 
	rserv/trunk/src/s_userserv.c (File Modified) 


leeh        2006/02/23 22:24:05 UTC	(20060223_1-21899)
  Log:
  - move some simple loc_sqlite_exec() calls over to rsdb_exec()
  

  Modified:
	rserv/trunk/src/s_banserv.c (File Modified) 
	rserv/trunk/src/s_chanserv.c (File Modified) 
	rserv/trunk/src/s_jupeserv.c (File Modified) 
	rserv/trunk/src/s_nickserv.c (File Modified) 
	rserv/trunk/src/s_operbot.c (File Modified) 
	rserv/trunk/src/s_operserv.c (File Modified) 
	rserv/trunk/src/s_userserv.c (File Modified) 


leeh        2006/02/23 20:32:56 UTC	(20060223_0-21897)
  Log:
  - move all the database headers into rsdb.h
  - move all the sqlite stuff into rsdb_sqlite.c
  - add in a generic rsdb_init(), rsdb_shutdown()
  - add in a generic rsdb_exec() with callback support
  

  Modified:
	rserv/trunk/include/rserv.h (File Modified) 
	rserv/trunk/src/Makefile.in (File Modified) 
	rserv/trunk/src/rserv.c (File Modified) 
	rserv/trunk/src/s_banserv.c (File Modified) 
	rserv/trunk/src/s_chanserv.c (File Modified) 
	rserv/trunk/src/s_jupeserv.c (File Modified) 
	rserv/trunk/src/s_nickserv.c (File Modified) 
	rserv/trunk/src/s_operbot.c (File Modified) 
	rserv/trunk/src/s_operserv.c (File Modified) 
	rserv/trunk/src/s_userserv.c (File Modified) 
	rserv/trunk/src/service.c (File Modified) 

