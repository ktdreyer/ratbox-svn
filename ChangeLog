leeh        2008/07/13 08:09:02 UTC	(20080713_1-25737)
  Log:
  - update the schema to have NULL rather than 0 for serial_field
  

  Modified:
	rserv/trunk/src/schema.c (File Modified) 


leeh        2008/07/13 08:08:09 UTC	(20080713_0-25735)
  Log:
  - swap has_serial for serial_name, and make it point to the name of the
    serial field
  

  Modified:
	rserv/trunk/include/rsdb.h (File Modified) 
	rserv/trunk/src/rsdb_common.c (File Modified) 


leeh        2008/07/12 09:13:56 UTC	(20080712_3-25733)
  Log:
  - flag each table in the schema as to whether it has a SERIAL reference or
    not, and build this when we run the schema check
  

  Modified:
	rserv/trunk/include/rsdb.h (File Modified) 
	rserv/trunk/src/rsdb_common.c (File Modified) 
	rserv/trunk/src/schema.c (File Modified) 


leeh        2008/07/12 08:55:14 UTC	(20080712_2-25731)
  Log:
  - add Id svn property
  

  Modified:
	rserv/trunk/src/cidr.c  (Property Modified)
	rserv/trunk/src/email.c (File Modified) (Property Modified)
	rserv/trunk/src/langs_format.c (File Modified) (Property Modified)
	rserv/trunk/src/log.c  (Property Modified)
	rserv/trunk/src/match.c  (Property Modified)
	rserv/trunk/src/modebuild.c  (Property Modified)
	rserv/trunk/src/newconf.c  (Property Modified)
	rserv/trunk/src/rsdb_pgsql.c (File Modified) (Property Modified)
	rserv/trunk/src/rserv.c  (Property Modified)
	rserv/trunk/src/s_alis.c  (Property Modified)
	rserv/trunk/src/s_banserv.c  (Property Modified)
	rserv/trunk/src/s_chanserv.c  (Property Modified)
	rserv/trunk/src/s_global.c  (Property Modified)
	rserv/trunk/src/s_jupeserv.c  (Property Modified)
	rserv/trunk/src/s_memoserv.c (File Modified) (Property Modified)
	rserv/trunk/src/s_nickserv.c  (Property Modified)
	rserv/trunk/src/s_operbot.c  (Property Modified)
	rserv/trunk/src/s_operserv.c  (Property Modified)
	rserv/trunk/src/s_userserv.c  (Property Modified)
	rserv/trunk/src/schema.c (File Modified) (Property Modified)
	rserv/trunk/src/scommand.c  (Property Modified)
	rserv/trunk/src/service.c  (Property Modified)
	rserv/trunk/src/snprintf.c (File Modified) (Property Modified)
	rserv/trunk/src/tools.c  (Property Modified)
	rserv/trunk/src/u_stats.c  (Property Modified)
	rserv/trunk/src/ucommand.c  (Property Modified)


leeh        2008/07/12 08:51:09 UTC	(20080712_1-25729)
  Log:
  - rename a couple of functions
  

  Modified:
	rserv/trunk/include/rsdb.h (File Modified) 
	rserv/trunk/src/rsdb_common.c (File Modified) 
	rserv/trunk/src/rsdb_mysql.c (File Modified) 
	rserv/trunk/src/rsdb_pgsql.c (File Modified) 
	rserv/trunk/src/rsdb_sqlite3.c (File Modified) 


leeh        2008/07/12 08:39:38 UTC	(20080712_0-25727)
  Log:
  - move the hard work of checking whether a table exists for the schema into
    rsdb_common.c, and have the db implementations just return the SQL
  

  Modified:
	rserv/trunk/include/rsdb.h (File Modified) 
	rserv/trunk/src/rsdb_common.c (File Modified) 
	rserv/trunk/src/rsdb_mysql.c (File Modified) 
	rserv/trunk/src/rsdb_pgsql.c (File Modified) 
	rserv/trunk/src/rsdb_sqlite3.c (File Modified) 


leeh        2008/07/07 20:43:06 UTC	(20080707_0-25687)
  Log:
  - fix up schema index generation for mysql
  

  Modified:
	rserv/trunk/src/rsdb_mysql.c (File Modified) 


leeh        2008/07/01 18:24:11 UTC	(20080701_0-25671)
  Log:
  - support for unique indexes to schema generation
  

  Modified:
	rserv/trunk/src/rsdb_mysql.c (File Modified) 


leeh        2008/06/30 20:11:33 UTC	(20080630_2-25667)
  Log:
  - primary keys for mysql schema check
  

  Modified:
	rserv/trunk/src/rsdb_mysql.c (File Modified) 


leeh        2008/06/30 19:32:40 UTC	(20080630_1-25665)
  Log:
  - start on the mysql schema checking
  

  Modified:
	rserv/trunk/src/rsdb_mysql.c (File Modified) 


leeh        2008/06/30 19:32:03 UTC	(20080630_0-25663)
  Log:
  - add a few missing rsdb_exec_fetch_end(), and some comments
  

  Modified:
	rserv/trunk/src/rsdb_common.c (File Modified) 
	rserv/trunk/src/rsdb_pgsql.c (File Modified) 


leeh        2008/06/29 19:30:37 UTC	(20080629_2-25649)
  Log:
  - I will deal with foreign keys for pgsql later
  

  Modified:
	rserv/trunk/src/rsdb_pgsql.c (File Modified) 


leeh        2008/06/29 18:54:50 UTC	(20080629_1-25647)
  Log:
  - fix up the schema checking for indexes, as well as can be done with pgsql
  - make the sql generation for indexes work for multiple fields
  

  Modified:
	rserv/trunk/src/rsdb_pgsql.c (File Modified) 


leeh        2008/06/29 18:10:48 UTC	(20080629_0-25645)
  Log:
  - fix up UNIQUE constraints for pgsql
  

  Modified:
	rserv/trunk/src/rsdb_pgsql.c (File Modified) 


leeh        2008/06/28 08:49:07 UTC	(20080628_0-25631)
  Log:
  - fix a database query using %s instead of %Q
  

  Modified:
	rserv/trunk/src/s_userserv.c (File Modified) 


leeh        2008/06/27 22:36:07 UTC	(20080627_1-25629)
  Log:
  - fix up the logic behind finding postgres primary keys
  

  Modified:
	rserv/trunk/src/rsdb_pgsql.c (File Modified) 


leeh        2008/06/27 21:17:20 UTC	(20080627_0-25627)
  Log:
  - fix autoconf test for pcre header
  

  Modified:
	rserv/trunk/autoconf/configure.in (File Modified) 
	rserv/trunk/configure (File Modified) 


leeh        2008/05/31 08:14:47 UTC	(20080531_2-25502)
  Log:
  - move some code out into rsdb_common.c
  

  Modified:
	rserv/trunk/include/rsdb.h (File Modified) 
	rserv/trunk/src/Makefile.in (File Modified) 
	rserv/trunk/src/rsdb_common.c (File Added) 
	rserv/trunk/src/rsdb_mysql.c (File Modified) 
	rserv/trunk/src/rsdb_pgsql.c (File Modified) 
	rserv/trunk/src/rsdb_sqlite3.c (File Modified) 


leeh        2008/05/31 07:55:29 UTC	(20080531_1-25500)
  Log:
  - rsdb_schema.c is unused nowadays
  

  Modified:
	rserv/trunk/src/Makefile.in (File Modified) 
	rserv/trunk/src/rsdb_schema.c (File Deleted) 


leeh        2008/05/31 07:54:16 UTC	(20080531_0-25498)
  Log:
  - add base support for synchronising primary keys/unique constraints for
    pgsql
  

  Modified:
	rserv/trunk/src/rsdb_pgsql.c (File Modified) 


leeh        2008/05/30 18:40:06 UTC	(20080530_2-25496)
  Log:
  - first attempt at schema syncing for pgsql
  

  Modified:
	rserv/trunk/include/rsdb.h (File Modified) 
	rserv/trunk/src/rsdb_pgsql.c (File Modified) 
	rserv/trunk/src/schema.c (File Modified) 


leeh        2008/05/30 17:24:53 UTC	(20080530_1-25494)
  Log:
  - merge the remains of rsdb_schema.h into rsdb.h
  

  Modified:
	rserv/trunk/include/rsdb.h (File Modified) 
	rserv/trunk/include/rsdb_schema.h (File Deleted) 
	rserv/trunk/src/rsdb_pgsql.c (File Modified) 
	rserv/trunk/src/rsdb_schema.c (File Modified) 
	rserv/trunk/src/rserv.c (File Modified) 
	rserv/trunk/src/schema.c (File Modified) 


leeh        2008/05/30 17:22:23 UTC	(20080530_0-25492)
  Log:
  - move primary keys into the db schema
  

  Modified:
	rserv/trunk/include/rsdb.h (File Modified) 
	rserv/trunk/include/rsdb_schema.h (File Modified) 
	rserv/trunk/src/rsdb_mysql.c (File Modified) 
	rserv/trunk/src/rsdb_pgsql.c (File Modified) 
	rserv/trunk/src/rsdb_schema.c (File Modified) 
	rserv/trunk/src/rsdb_sqlite3.c (File Modified) 
	rserv/trunk/src/schema.c (File Modified) 


leeh        2008/05/29 19:35:11 UTC	(20080529_1-25490)
  Log:
  - add in support for foreign keys to pgsql, mysql/sqlite don't do these
    properly
  - extend the schema with the foreign keys.  pgsql now appears to be
    correct..
  

  Modified:
	rserv/trunk/include/rsdb.h (File Modified) 
	rserv/trunk/src/rsdb_mysql.c (File Modified) 
	rserv/trunk/src/rsdb_pgsql.c (File Modified) 
	rserv/trunk/src/rsdb_sqlite3.c (File Modified) 
	rserv/trunk/src/schema.c (File Modified) 


leeh        2008/05/29 19:27:26 UTC	(20080529_0-25488)
  Log:
  - change debugging to print sql to stdout
  

  Modified:
	rserv/trunk/src/rsdb_schema.c (File Modified) 


leeh        2008/05/28 19:09:51 UTC	(20080528_1-25484)
  Log:
  - refactor some code so that there is a rsdb_schema_generate_element() to
    generate the sql for each table element, which is contained within the
    relevant rsdb_ src code
  

  Modified:
	rserv/trunk/include/rsdb.h (File Modified) 
	rserv/trunk/include/rsdb_schema.h (File Modified) 
	rserv/trunk/src/rsdb_mysql.c (File Modified) 
	rserv/trunk/src/rsdb_pgsql.c (File Modified) 
	rserv/trunk/src/rsdb_schema.c (File Modified) 
	rserv/trunk/src/rsdb_sqlite3.c (File Modified) 


leeh        2008/05/28 18:30:10 UTC	(20080528_0-25472)
  Log:
  - add support for indexes/uniques to the schema generation
  - generate the field values independently, without separators
  

  Modified:
	rserv/trunk/include/rsdb_schema.h (File Modified) 
	rserv/trunk/src/rsdb_schema.c (File Modified) 
	rserv/trunk/src/schema.c (File Modified) 


leeh        2008/05/27 20:57:20 UTC	(20080527_5-25470)
  Log:
  - finish updating the base schema
  

  Modified:
	rserv/trunk/src/schema.c (File Modified) 


leeh        2008/05/27 20:50:46 UTC	(20080527_4-25468)
  Log:
  - add 'CHAR' type to schema generation
  

  Modified:
	rserv/trunk/include/rsdb_schema.h (File Modified) 
	rserv/trunk/src/rsdb_schema.c (File Modified) 


leeh        2008/05/27 20:48:20 UTC	(20080527_3-25466)
  Log:
  - missing break;
  

  Modified:
	rserv/trunk/src/rsdb_schema.c (File Modified) 


leeh        2008/05/27 19:27:19 UTC	(20080527_2-25464)
  Log:
  - extend rsdb_schema to support booleans, and references to SERIAL values
  

  Modified:
	rserv/trunk/include/rsdb_schema.h (File Modified) 
	rserv/trunk/src/rsdb_schema.c (File Modified) 


leeh        2008/05/27 17:56:12 UTC	(20080527_1-25462)
  Log:
  - make it clear via a typedef that the option value in rsdb_schema.h points
    to the schema value above
  

  Modified:
	rserv/trunk/include/rsdb_schema.h (File Modified) 


leeh        2008/05/27 17:53:28 UTC	(20080527_0-25460)
  Log:
  - move the schema out into schema.c
  - add support for 'TEXT' values
  

  Modified:
	rserv/trunk/include/rsdb_schema.h (File Modified) 
	rserv/trunk/include/rserv.h (File Modified) 
	rserv/trunk/src/Makefile.in (File Modified) 
	rserv/trunk/src/rsdb_schema.c (File Modified) 
	rserv/trunk/src/rserv.c (File Modified) 
	rserv/trunk/src/schema.c (File Added) 


leeh        2008/05/24 08:33:14 UTC	(20080524_0-25458)
  Log:
  - globalise rsdb_schema_set, and pass that around instead of the raw values
    from it
  

  Modified:
	rserv/trunk/include/rsdb_schema.h (File Modified) 
	rserv/trunk/src/rsdb_schema.c (File Modified) 


leeh        2008/05/23 22:40:10 UTC	(20080523_10-25456)
  Log:
  - primary_key test should be EmptyString() not just an if()
  

  Modified:
	rserv/trunk/src/rsdb_schema.c (File Modified) 


leeh        2008/05/23 22:37:01 UTC	(20080523_9-25454)
  Log:
  - add a superstruct to amalgamate the structures of schema tables
  

  Modified:
	rserv/trunk/src/rsdb_schema.c (File Modified) 


leeh        2008/05/23 22:24:52 UTC	(20080523_8-25452)
  Log:
  - add in users_resetpass table to the schema generation
  - fix so we don't generate primary key fields at the end for sqlite, as they
    go inline with the INTEGER declaration
  

  Modified:
	rserv/trunk/src/rsdb_schema.c (File Modified) 


leeh        2008/05/23 22:07:09 UTC	(20080523_7-25450)
  Log:
  - add id properties on rsdb_schema.{c|h}
  - add in BSD license to rsdb_schema.c
  

  Modified:
	rserv/trunk/include/rsdb_schema.h  (Property Modified)
	rserv/trunk/src/rsdb_schema.c (File Modified) (Property Modified)


leeh        2008/05/23 22:06:16 UTC	(20080523_6-25448)
  Log:
  - add in some funky schema generation..
  

  Modified:
	rserv/trunk/src/rsdb_schema.c (File Modified) 


leeh        2008/05/23 21:41:53 UTC	(20080523_5-25446)
  Log:
  - add new '-c' option to binary to create the initial database table set
  

  Modified:
	rserv/trunk/src/rserv.c (File Modified) 


leeh        2008/05/23 21:33:18 UTC	(20080523_4-25444)
  Log:
  - base stuff for the schema generation
  

  Modified:
	rserv/trunk/include/rsdb_schema.h (File Added) 
	rserv/trunk/src/Makefile.in (File Modified) 
	rserv/trunk/src/rsdb_schema.c (File Added) 


leeh        2008/05/23 21:30:08 UTC	(20080523_3-25442)
  Log:
  - apply ratbox-sqlite3 externals flag
  

  Modified:
	rserv/trunk/  (Property Modified)


leeh        2008/05/23 21:27:15 UTC	(20080523_2-25440)
  Log:
  - create defines for RSERV_DB_MYSQL/RSERV_DB_PGSQL/RSERV_DB_SQLITE as
    appropriate
  

  Modified:
	rserv/trunk/autoconf/configure.in (File Modified) 
	rserv/trunk/configure (File Modified) 
	rserv/trunk/include/setup.h.in (File Modified) 


leeh        2008/05/23 21:26:22 UTC	(20080523_1-25438)
  Log:
  - build target for sqlite is now ratbox-sqlite3
  

  Modified:
	rserv/trunk/autoconf/configure.in (File Modified) 
	rserv/trunk/configure (File Modified) 


leeh        2008/05/23 17:58:30 UTC	(20080523_0-25435)
  Log:
  - remove sqlite3 sources, in preparation for it being an externals
  

  Modified:
	rserv/trunk/sqlite3/ (File Deleted) 


leeh        2008/05/20 20:28:18 UTC	(20080520_8-25422)
  Log:
  - disable threading and handlers in sqlite by default
  

  Modified:
	rserv/trunk/sqlite3/configure (File Modified) 
	rserv/trunk/sqlite3/configure.ac (File Modified) 


leeh        2008/05/20 20:16:44 UTC	(20080520_7-25420)
  Log:
  - add new sqlite amalgamation sources
  

  Modified:
	rserv/trunk/sqlite3/INSTALL (File Added) 
	rserv/trunk/sqlite3/Makefile.am (File Added) 
	rserv/trunk/sqlite3/Makefile.in (File Added) 
	rserv/trunk/sqlite3/README (File Added) 
	rserv/trunk/sqlite3/aclocal.m4 (File Added) 
	rserv/trunk/sqlite3/bootstrap.sh (File Added) 
	rserv/trunk/sqlite3/config.guess (File Added) 
	rserv/trunk/sqlite3/config.sub (File Added) 
	rserv/trunk/sqlite3/configure (File Added) 
	rserv/trunk/sqlite3/configure.ac (File Added) 
	rserv/trunk/sqlite3/depcomp (File Added) 
	rserv/trunk/sqlite3/install-sh (File Added) 
	rserv/trunk/sqlite3/ltmain.sh (File Added) 
	rserv/trunk/sqlite3/missing (File Added) 
	rserv/trunk/sqlite3/shell.c (File Added) 
	rserv/trunk/sqlite3/sqlite3.c (File Added) 
	rserv/trunk/sqlite3/sqlite3.h (File Added) 
	rserv/trunk/sqlite3/sqlite3ext.h (File Added) 


leeh        2008/05/20 20:14:44 UTC	(20080520_6-25418)
  Log:
  - remove the old sqlite3 sources in preparation for new amalgamation
  

  Modified:
	rserv/trunk/sqlite3/Makefile.in (File Deleted) 
	rserv/trunk/sqlite3/README (File Deleted) 
	rserv/trunk/sqlite3/VERSION (File Deleted) 
	rserv/trunk/sqlite3/aclocal.m4 (File Deleted) 
	rserv/trunk/sqlite3/config.guess (File Deleted) 
	rserv/trunk/sqlite3/config.sub (File Deleted) 
	rserv/trunk/sqlite3/configure (File Deleted) 
	rserv/trunk/sqlite3/configure.ac (File Deleted) 
	rserv/trunk/sqlite3/install-sh (File Deleted) 
	rserv/trunk/sqlite3/ltmain.sh (File Deleted) 
	rserv/trunk/sqlite3/main.mk (File Deleted) 
	rserv/trunk/sqlite3/mkso.sh (File Deleted) 
	rserv/trunk/sqlite3/spec.template (File Deleted) 
	rserv/trunk/sqlite3/sqlite.pc.in (File Deleted) 
	rserv/trunk/sqlite3/sqlite3.1 (File Deleted) 
	rserv/trunk/sqlite3/sqlite3.def (File Deleted) 
	rserv/trunk/sqlite3/sqlite3.h (File Deleted) 
	rserv/trunk/sqlite3/sqlite3.pc.in (File Deleted) 
	rserv/trunk/sqlite3/src/ (File Deleted) 
	rserv/trunk/sqlite3/tool/ (File Deleted) 


leeh        2008/05/20 20:05:41 UTC	(20080520_5-25416)
  Log:
  - move the sqlite schema over to being contained in the core code
  

  Modified:
	rserv/trunk/include/schema-sqlite.h (File Added) 
	rserv/trunk/src/rsdb_sqlite3.c (File Modified) 
	rserv/trunk/tools/base/schema-sqlite.txt (File Deleted) 
	rserv/trunk/tools/generate-schema.pl (File Modified) 


leeh        2008/05/20 19:54:51 UTC	(20080520_4-25414)
  Log:
  - I always forget to update the documentation..
  

  Modified:
	rserv/trunk/RELEASE_NOTES (File Modified) 
	rserv/trunk/SVN-Access (File Modified) 


leeh        2008/05/20 19:52:47 UTC	(20080520_3-25412)
  Log:
  - this is now 1.3.0beta
  

  Modified:
	rserv/trunk/autoconf/configure.in (File Modified) 
	rserv/trunk/configure (File Modified) 
	rserv/trunk/include/config.h (File Modified) 



